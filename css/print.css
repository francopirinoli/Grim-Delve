@media print {
    @page {
        size: A4 portrait;
        margin: 0.6cm;
    }

    /* 1. RESET */
    html, body {
        width: 100%;
        height: auto !important;
        margin: 0 !important;
        padding: 0 !important;
        background: white !important;
        color: black !important;
        font-family: 'Georgia', serif;
        font-size: 9pt; /* Smaller font for density */
        line-height: 1.2;
        overflow: visible !important;
        display: block !important;
    }

    /* 2. HIDE APP UI */
    #app-container, #sidebar, .char-hud, .char-tabs, .char-tab-content, 
    #mobile-menu-btn, .play-toolbar, .modal-overlay, button, .btn-icon {
        display: none !important;
    }

    /* 3. SHOW PRINT */
    .print-only, #print-sheet-root {
        display: block !important;
        visibility: visible !important;
    }

    /* --- LAYOUT GRID --- */
    .print-page {
        width: 100%;
        height: 280mm;
        position: relative;
        break-after: page;
        page-break-after: always;
    }
    .print-page:last-child { break-after: auto; }

    /* Box Style (The "Sheet" Look) */
    .p-section {
        border: 2px solid #000;
        margin-bottom: 10px;
        padding: 5px;
        background: white;
        break-inside: avoid;
    }

    .p-label {
        font-family: sans-serif;
        font-weight: bold;
        text-transform: uppercase;
        font-size: 7pt;
        color: #444;
        border-bottom: 1px solid #ccc;
        margin-bottom: 2px;
        display: block;
    }

    /* --- HEADER SECTION --- */
    .p-header-grid {
        display: grid;
        grid-template-columns: 1fr 120px; /* Info | Image */
        gap: 15px;
        margin-bottom: 10px;
        height: 120px;
    }

    .p-identity-grid {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 10px;
    }
    
    .p-id-field { display: flex; flex-direction: column; }
    .p-id-val { font-size: 14pt; font-weight: bold; font-family: sans-serif; }
    .p-id-sub { font-size: 10pt; }

    /* Fixed Portrait Size */
    .p-portrait-box {
        width: 120px;
        height: 120px;
        border: 2px solid #000;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #eee;
    }
    .p-portrait-box img {
        width: 100%;
        height: 100%;
        object-fit: cover; /* Fill the box */
        object-position: top center;
    }

    /* --- ATTRIBUTES STRIP --- */
    .p-attr-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
        border: 2px solid #000;
        background: #f0f0f0;
    }
    .p-attr-box {
        flex: 1;
        text-align: center;
        padding: 5px;
        border-right: 1px solid #000;
    }
    .p-attr-box:last-child { border-right: none; }
    .p-attr-val { font-size: 16pt; font-weight: 800; font-family: sans-serif; }

    /* --- VITALS --- */
    .p-vitals-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 10px;
        margin-bottom: 15px;
    }
    .p-vital {
        border: 2px solid #000;
        text-align: center;
        padding: 5px;
        height: 50px;
    }
    .p-vital-val { font-size: 18pt; font-weight: bold; }

    /* --- MAIN COLUMNS --- */
    .p-main-cols {
        display: grid;
        grid-template-columns: 1fr 1.8fr; /* Narrow Left, Wide Right */
        gap: 15px;
    }

    /* Defense Box */
    .p-ac-box {
        border: 3px solid #000;
        text-align: center;
        padding: 10px;
        margin-bottom: 10px;
    }
    .p-ac-val { font-size: 28pt; font-weight: 800; line-height: 1; }

    /* Lists */
    .p-list-row {
        display: flex;
        justify-content: space-between;
        border-bottom: 1px dotted #999;
        margin-bottom: 2px;
        font-size: 9pt;
    }

    /* Attack Table */
    .p-atk-table { width: 100%; border-collapse: collapse; margin-bottom: 0; }
    .p-atk-table th { text-align: left; font-size: 8pt; border-bottom: 2px solid #000; }
    .p-atk-table td { padding: 4px 2px; border-bottom: 1px solid #ccc; font-size: 9pt; }
    
    /* Notes Area */
    .p-notes {
        border: 1px solid #ccc;
        height: 150px;
        padding: 5px;
        font-family: monospace;
        font-size: 9pt;
        white-space: pre-wrap;
    }

    /* --- PAGE 2 --- */
    .p-wealth-strip {
        display: flex;
        justify-content: space-around;
        background: #ddd;
        border: 1px solid #000;
        padding: 5px;
        font-weight: bold;
        margin-bottom: 15px;
    }

    .p-feat-block {
        border: 1px solid #000;
        padding: 5px;
        margin-bottom: 5px;
        background: #fdfdfd;
        page-break-inside: avoid;
    }
    .p-feat-head { font-weight: bold; border-bottom: 1px dotted #000; display: flex; justify-content: space-between; }
    
    /* Print Colors */
    * { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
}

/* --- MONSTER CARD PRINT OVERRIDES --- */
.monster-card {
    border: 2px solid #000 !important;
    background: white !important;
    box-shadow: none !important;
    page-break-inside: avoid;
    margin: 0 auto;
}

.mc-header {
    background: #000 !important; /* Force black background for print contrast */
    color: #fff !important;
    border-bottom: 2px solid #000 !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
}

.mc-name {
    color: #fff !important; /* Keep name white on black header */
}

.mc-stats-grid {
    background: #eee !important;
    border-bottom: 2px solid #000 !important;
}

/* IMPORTANT: Image Fixing */
.sb-image-container {
    height: 250px !important; /* Force height */
    overflow: hidden !important; /* Clip image */
    border-bottom: 2px solid #000 !important;
    background: #fff !important;
    position: relative !important;
    display: block !important;
}

.sb-image-container img {
    /* The inline style transform from JS handles position */
    /* Ensure it prints properly */
    max-width: none !important;
    max-height: none !important;
}

/* Hide UI elements inside card */
.del-custom { display: none !important; }

/* Colors for print */
.mc-section-title { color: #000 !important; border-color: #000 !important; }
.sb-prop-name { color: #000 !important; }
.mc-stat-val { color: #000 !important; }

