/* css/print.css */

@media print {
    @page {
        size: A4 portrait;
        margin: 1cm;
    }

    /* RESET */
    html, body {
        width: 100%;
        margin: 0 !important;
        padding: 0 !important;
        background: white !important;
        color: black !important;
        font-family: 'Inter', sans-serif;
        font-size: 9pt;
        line-height: 1.3;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
    }

    /* HIDE APP UI */
    #app-container, #mobile-menu-btn, .modal-overlay, #dice-ui-layer {
        display: none !important;
    }

    /* SHOW PRINT ROOT */
    .print-only, #print-sheet-root {
        display: block !important;
        visibility: visible !important;
    }

    /* PAGE LAYOUT */
    .print-page {
        width: 100%;
        height: 270mm; /* A4 printable area roughly */
        position: relative;
        page-break-after: always;
        display: flex;
        flex-direction: column;
        gap: 10px;
    }
    .print-page:last-child { page-break-after: auto; }

    /* --- COMPONENTS --- */
    .p-section {
        border: 2px solid #000;
        padding: 5px;
        background: #fff;
        margin-bottom: 10px;
        break-inside: avoid;
    }

    .p-header {
        font-family: 'Cinzel', serif;
        font-weight: 700;
        text-transform: uppercase;
        border-bottom: 2px solid #000;
        margin-bottom: 5px;
        font-size: 10pt;
        color: #000;
        background: #ddd;
        padding: 2px 5px;
    }

    /* HEADER */
    .p-top-grid {
        display: grid;
        grid-template-columns: 100px 1fr;
        gap: 15px;
        height: 100px;
        margin-bottom: 10px;
    }

    .p-img-box {
        width: 100px;
        height: 100px;
        border: 2px solid #000;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #eee;
    }
    .p-img-box img { width: 100%; height: 100%; object-fit: cover; }

    .p-identity {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }
    
    .p-char-name {
        font-family: 'Cinzel', serif;
        font-size: 24pt;
        font-weight: 900;
        border-bottom: 2px solid #000;
        line-height: 1;
    }

    .p-id-row {
        display: grid;
        grid-template-columns: 2fr 1fr 1fr;
        gap: 10px;
    }
    .p-field label { font-size: 7pt; text-transform: uppercase; color: #666; display: block; }
    .p-field span { font-size: 11pt; font-weight: bold; font-family: 'Fira Code', monospace; }

    /* VITALS BAR */
    .p-vitals-bar {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 0;
        border: 2px solid #000;
        background: #eee;
        margin-bottom: 10px;
    }
    
    .p-vital-box { 
        text-align: center; 
        border-right: 1px solid #aaa; 
        padding: 5px;
    }
    .p-vital-box:last-child { border-right: none; }
    .p-vital-box label { display: block; font-size: 7pt; font-weight: bold; }
    .p-vital-box span { font-size: 14pt; font-weight: 800; font-family: 'Fira Code', monospace; }

    /* COLUMNS */
    .p-columns-2 {
        display: grid;
        grid-template-columns: 35% 63%; /* Adjust based on preference */
        gap: 2%;
        flex-grow: 1;
    }
    
    .p-grid-2 {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        height: 100%;
    }

    /* STATS & SKILLS */
    .p-attr-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 5px;
        margin-bottom: 5px;
    }
    .p-attr { 
        border: 1px solid #000; 
        padding: 5px; 
        text-align: center; 
        border-radius: 4px;
    }
    .p-attr label { display: block; font-size: 6pt; text-transform: uppercase; }
    .p-attr span { font-size: 12pt; font-weight: bold; }

    .p-defense-grid {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr 1fr;
        gap: 5px;
        margin-bottom: 10px;
        text-align: center;
    }
    .p-def-box { border: 2px solid #000; padding: 5px; }
    .p-def-val { font-size: 14pt; font-weight: 900; display: block; }
    .p-def-lbl { font-size: 6pt; text-transform: uppercase; }

    .p-skill-list { font-size: 8pt; }
    .p-skill-row {
        display: flex;
        justify-content: space-between;
        border-bottom: 1px dotted #ccc;
        padding: 1px 0;
    }
    .p-skill-row.trained { font-weight: bold; }
    .p-skill-row.expert { font-weight: 900; background: #eee; }

    /* ATTACKS */
    .p-table { width: 100%; border-collapse: collapse; font-size: 9pt; }
    .p-table th { background: #000; color: #fff; padding: 3px; font-size: 8pt; text-align: left; }
    .p-table td { border-bottom: 1px solid #ccc; padding: 4px; }

    /* FEATURES & LISTS */
    .p-feat-row {
        margin-bottom: 6px;
        border-bottom: 1px solid #eee;
        padding-bottom: 4px;
        break-inside: avoid;
    }
    .p-feat-name { font-weight: bold; font-size: 9pt; }
    .p-feat-source { font-size: 7pt; color: #666; font-weight: normal; }
    .p-feat-desc { font-size: 8pt; color: #333; }

    /* CARDS (Spells/Recipes) */
    .p-card {
        border: 1px solid #999;
        margin-bottom: 8px;
        padding: 5px;
        background: #f9f9f9;
        break-inside: avoid;
        font-size: 8pt;
    }
    
    .p-card-top { display: flex; justify-content: space-between; font-weight: bold; border-bottom: 1px dotted #ccc; margin-bottom: 2px; }
    .p-card-meta { font-size: 7pt; color: #666; font-style: italic; margin-bottom: 2px; }
    
    /* Card Styles for B&W Printing */
    .p-card.exploit { border-left: 4px solid #555; background: #f0f0f0; }
    .p-card.spell { border-left: 4px solid #000; }
    .p-card.recipe { border-left: 4px solid #aaa; border-left-style: dashed; }

    .p-notes-area {
        width: 100%;
        height: 100%;
        font-family: 'Courier New', monospace;
        font-size: 9pt;
        white-space: pre-wrap;
    }
}