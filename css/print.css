/* ==========================================================================
   A4 PRINT STYLESHEET (Grim Delve v4.0)
   ========================================================================== */

/* Hide by default on screen */
.print-only { display: none; }

@media print {
    @page {
        size: A4 portrait;
        margin: 0.8cm;
    }

    /* 1. Reset & Hide App UI */
    body {
        background-color: white !important;
        color: black !important;
        font-family: 'Inter', sans-serif;
        font-size: 10pt; /* Dense data requires smaller font */
        line-height: 1.3;
        width: 100%;
        height: auto;
        overflow: visible;
    }

    #sidebar, .char-hud, .char-tabs, .char-tab-content, 
    #mobile-menu-btn, .modal-overlay {
        display: none !important;
    }

    /* 2. Show Print Container */
    .print-only {
        display: block !important;
        width: 100%;
    }

    /* --- PAGE LAYOUT --- */
    .print-page {
        width: 100%;
        height: 270mm; /* Approx printable area of A4 */
        position: relative;
        page-break-after: always;
        display: flex;
        flex-direction: column;
        gap: 0.5cm;
    }

    .print-page:last-child {
        page-break-after: auto;
    }

    /* --- SHARED COMPONENTS --- */
    
    /* Boxes */
    .p-box {
        border: 2px solid #000;
        padding: 5px;
        position: relative;
    }

    .p-header {
        background: #000;
        color: #fff;
        font-family: 'Cinzel', serif;
        font-weight: bold;
        text-transform: uppercase;
        padding: 2px 5px;
        font-size: 0.9em;
        margin: -5px -5px 5px -5px; /* Bleed to edge */
        text-align: center;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
    }

    /* --- PAGE 1: COMBAT SHEET --- */

    /* Identity Strip */
    .p-identity {
        display: grid;
        grid-template-columns: 2fr 1fr 1fr 1fr;
        gap: 10px;
        border-bottom: 2px solid #000;
        padding-bottom: 10px;
    }
    .p-id-field { display: flex; flex-direction: column; }
    .p-id-label { font-size: 0.6em; text-transform: uppercase; color: #555; }
    .p-id-val { font-size: 1.2em; font-weight: bold; font-family: 'Cinzel', serif; }

    /* Attributes Strip */
    .p-attributes {
        display: grid;
        grid-template-columns: repeat(6, 1fr);
        background: #eee;
        border: 1px solid #000;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
    }
    .p-attr-cell {
        border-right: 1px solid #000;
        text-align: center;
        padding: 5px;
    }
    .p-attr-cell:last-child { border-right: none; }
    .p-attr-name { font-weight: bold; display: block; font-size: 0.8em; }
    .p-attr-val { font-size: 1.4em; font-weight: bold; font-family: 'Fira Code', monospace; }

    /* Main Grid */
    .p-grid-main {
        display: grid;
        grid-template-columns: 1fr 1.6fr; /* Left: Defense/Skills, Right: Vitals/Attacks */
        gap: 1cm;
        flex-grow: 1;
    }

    /* Vitals Row */
    .p-vitals {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr 1fr;
        gap: 5px;
        margin-bottom: 15px;
    }
    .p-vital-box {
        border: 2px solid #000;
        text-align: center;
        padding: 5px;
    }
    .p-vital-box h4 { margin: 0; font-size: 0.7em; }
    .p-vital-val { font-size: 1.5em; font-weight: bold; display: block; margin-top: 5px; }

    /* Tables */
    .p-table { width: 100%; border-collapse: collapse; font-size: 0.9em; margin-bottom: 10px; }
    .p-table th { border-bottom: 2px solid #000; text-align: left; font-size: 0.7em; }
    .p-table td { border-bottom: 1px solid #ccc; padding: 3px 0; }
    .p-table .die { text-align: right; font-weight: bold; font-family: 'Fira Code', monospace; }

    /* Armor/Defense Section */
    .p-defense-grid {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 5px;
        text-align: center;
        margin-bottom: 10px;
    }
    .p-ac-large {
        grid-column: 1 / -1;
        border: 3px solid #000;
        padding: 5px;
        font-size: 2em;
        font-weight: bold;
    }

    /* --- PAGE 2: NARRATIVE & GEAR --- */
    
    /* Features Grid */
    .p-features-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
    }
    .p-feat-card {
        border: 1px solid #aaa;
        padding: 5px;
        font-size: 0.85em;
        break-inside: avoid;
        margin-bottom: 5px;
    }
    .p-feat-name { font-weight: bold; display: block; border-bottom: 1px dotted #ccc; }
    
    /* Inventory List */
    .p-inv-list {
        column-count: 2;
        column-gap: 1cm;
        font-size: 0.85em;
    }
    .p-inv-item {
        display: flex;
        justify-content: space-between;
        border-bottom: 1px solid #eee;
        margin-bottom: 2px;
    }
}
